<!--<link href="../HomePage/Dashboard/style/reset.css" rel="stylesheet"  type="text/css"/>-->
<style type="text/css">
    /*.widget_calendar .clear
    {
        clear: both;
    }*/


    .widget_calendar
    {
        min-height:350px;
        min-width:300px;
        width: 100%;
        text-align: left;
        background: #ffffff;
        border: 1px solid #fff;
        -moz-border-radius: 3px;
        border-radius: 3px;
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
        color: #272727;
        overflow:auto;
    }
    #menu_body
    {
        border: 1px solid #dbdbdb;
    }
    .widget_calendar .div_main_date
    {
        padding: 20px;
        text-align: center;
        margin: 0px auto;
        cursor: pointer;
    }


    .widget_calendar .main_date
    {
        color: #4FA213 !important;
        font-size: 50px;
        font-family: 'Open Sans Condensed', sans-serif;
        position: relative;
    }

    .widget_calendar .main_date a
    {
        color: inherit;
        text-decoration: none;
        text-transform: uppercase;
    }

    .widget_calendar .main_date .previous_month
    {
        float: left;
        font-size: 60px;
        position: absolute;
        left: 20px;
        margin: -10px 0px 0px -10px;
    }

    .widget_calendar .main_date .next_month
    {
        float: right;
        font-size: 60px;
        position: absolute;
        right: 20px;
        margin: -10px -10px 0px 0px;
    }

    .widget_calendar .main_date .div_dates
    {
        margin-left: 50px;
        text-align: center;
    }

    .widget_calendar li
    {
        margin: 0;
        padding: 0;
        background: none;
    }
    .widget_calendar .main_date .div_dates .day_name
    {  
        width:100%;
    }

    .widget_calendar .main_date .div_dates .day_name .calendar-icon-header
    {
        float: left;
        width: 50px;
        height: 50px;
        cursor: pointer;
        background: url(../HomePage/Dashboard/widget_img/calendar.png) center right no-repeat;
    }

    .widget_calendar .main_date .div_dates .day_name #tdDay
    {
        text-transform: uppercase;
        text-align: left;
        color: #4FA213 !important;
        font-size: 50px !important;
        /*float: left;*/
        font-family: 'Open Sans Condensed', sans-serif;
        text-transform: uppercase;
        font-weight: bold !important;
        color: inherit;
        margin: 0px auto;
        white-space: nowrap;
    }


    .widget_calendar .main_date .div_dates .day_name .span_month
    {
        font-size: 20px;
        color: #4FA213 !important;
        text-transform: uppercase;
        float:left;
    }

    .widget_calendar .main_date .div_dates .day_name .span_week
    {
        font-size: 12px;
        text-transform: uppercase;
        color: #4FA213 !important;
    }
        .widget_calendar .main_date .div_dates .day_name .span_week #header_table
    {
        
        color: #4FA213 !important;
    }

    #calendar
    {
        float: left;
    }

    .clear
    {
        clear: both;
    }

    .menu_items .menu_buttons .square_button
    {
        -moz-border-radius: 3px;
        border-radius: 3px;
        border: 1px solid #dbdbdb;
        color: #3366A7;
        font-size: 20px;
        padding: 10px;
        float: right;
        font-weight: bold;
        line-height: 100%;
        background: #F5F5F5;
        border: 1px solid #F5F5F5;
        margin: 0px 5px 0px 5px;
        cursor: pointer;
    }

    .menu_items .menu_accordion .menu_count
    {
        float: right;
        font-size: smaller;
        color: red !important;
    }

    .menu_items .menu_accordion div 
    {
        font-size:20px;
    }

    .menu_items .menu_buttons div:hover, .menu_items .menu_buttons .active
    {
        text-decoration: underline;
        background-color: #D9F7C5;     
    }
    .badge 
    {
        background:             radial-gradient( 5px -9px, circle, white 8%, red 26px );
            background:    -moz-radial-gradient( 5px -9px, circle, white 8%, red 26px );
            background:     -ms-radial-gradient( 5px -9px, circle, white 8%, red 26px );
            background:      -o-radial-gradient( 5px -9px, circle, white 8%, red 26px );
            background: -webkit-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background-color: red;
        border: 2px solid white;
        border-radius: 12px; /* one half of ( (border * 2) + height + padding ) */
        box-shadow: 1px 1px 1px black;
        color: white !important;
        font: bold 12px/10px Helvetica, Verdana, Tahoma;
        height: 16px; 
        padding: 4px 3px 0 3px;
        text-align: center;
        float:right;
        text-decoration:none;
        /*min-width: 14px;*/
    }
</style>

<body>
    <div id="calendar" class="widget_calendar" >
        
        <div class="div_main_date">
            <div class="main_date">
                <div class="div_dates" id="main_date" >
                    <div class="day_name" id="date_day">
                        <input id="datepicker" style="display: none" />
                        <label class="calendar-icon-header" ><label id="date_header">&nbsp; </label></label>
                        <table style="width:70%">
                            <tr>
                                <td>
                                    <div id="tdDay">Day</div>
                                </td>
                                <td class="span_month">
                                    <div id="tdMonthName">Month</div>
                                    <div id="tdDateNumber">DateNumber</div>
                                </td>
                            </tr>
                            <tr>
                                <td class="span_week" colspan="2">
                                    <div id="weekOnly" style="display: none">
                                        <table id="header_table">
                                            <thead>
                                                <tr>
                                                    <th id="Sun">Sun</th>
                                                    <th id="Mon">Mon</th>
                                                    <th id="Tue">Tue</th>
                                                    <th id="Wed">Wed</th>
                                                    <th id="Thu">Thu</th>
                                                    <th id="Fri">Fri</th>
                                                    <th id="Sat">Sat</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!--<div class="clear"></div>-->

        <div class="menu_items">
            <div id="menu_body"></div>


            <div class="menu_items">
                <div class="menu_buttons">
                    <div class="square_button" id="button_year">Year </div>
                    <div class="square_button" id="button_month">Month </div>
                    <div class="square_button" id="button_week">Week </div>
                    <div class="square_button" id="button_day">Day</div>
                    <div class="square_button active" id="button_today" style="float: left;">Today</div>

                </div>
            </div>
        </div>
    </div>
    <div style="clear:both"></div>
    <script type="text/javascript">

        var todayDate = new Date();

        var selectedDayName = dayName_return(todayDate.getDay(), 1);
        var dateNumber = todayDate.getDate();
        var selectedShortMonthName = month_return(todayDate.getMonth(), 2);
        var yearNumber = todayDate.getFullYear();
        var selectedMonthName = month_return(todayDate.getMonth(), 1);
        var selectedShortDayName = dayName_return(todayDate.getDay(), 2);
        var date = "";
        var selectedWeekNumber = getWeekNumber(todayDate);
        var today_dateNumber = dateNumber
        var today_selectedShortMonthName = selectedShortMonthName;
        var today_selectedDayName = selectedDayName;
        var i = 0;
        var fullDate = todayDate.getMonth() + "/" + dateNumber + "/" + yearNumber;
        var weekStart = todayDate.getDay();
        var weekEnd = todayDate.getDay();
        var DateRange = weekStart + "$" + weekEnd;

        $(document).ready(function () {
            //fill the header with todays date
            $("#tdDay").html(selectedDayName);
            $("#tdMonthName").html(selectedShortMonthName);
            $("#tdDateNumber").html(dateNumber);
            createHeaderForWeekView(todayDate, selectedMonthName, dateNumber, selectedShortDayName, yearNumber);
            createMainCalendar();

        });

        function createDateRange(weekStart, weekEnd) {
            return DateRange = weekStart + "$" + weekEnd;
        }
        //create menu event items
        function createMainCalendar() {
            //create menu
            var birthdayInd = 1;
            var newHiresInd = 1;
            var terminatedInd = 1;
            var anniversairesInd = 1;
            var perfReviewInd = 1;
            var RequestedToInd = 1;
            var RetirementInd = 1;
            var LicensesInd = 1;
            var createMenu = "";
            var eventId = "000"
            
            createMenu = createMenu + "<div class='menu_accordion' id='menu_accordion'>";

            if (birthdayInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 001,DateRange,"Birthdays", 4, "birthday");
            }
            if (newHiresInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 002, DateRange, "New Hires", 3, "newHireId");
            }
            if (terminatedInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 003, DateRange, "Terminated", 5, "TerminatedId");
            }
            if (anniversairesInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 004, DateRange, "Anniversaires", 1, "anniversId");
            }
            if (perfReviewInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 005, DateRange, "Performance Preview", 3, "performanceId");
            }
            if (RequestedToInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 006, DateRange, "Requested Time Off", 2, "requestedId");
            }
            if (RetirementInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 007, DateRange, "Retirement", 9, "RetirementId");
            }
            if (LicensesInd = 1) {
                createMenu = createMenu + createListItems(fullDate, 008, DateRange, "Licenses", 5, "LicenseId");
            }

            createMenu = createMenu + "</div>";
            $("#menu_body").html(createMenu);
        }
        function createListItems(selectedFullDate,eventId,selectedDateRange,MenuHeader, listCount, menuId) {

            var strHTML = "<div id='" + menuId + "'>" + MenuHeader + " <a href='homepage/Details.html?EventId=" + eventId + "&Date=" + selectedFullDate + "&DateRange=" + selectedDateRange + "' class='badge' style='color: white !important;'>(" + listCount + ")</a></div> ";
            return strHTML;
        }


        $(function () {
            //date picker
            $("#datepicker").datepicker(
                {

                    beforeShow: function (input, inst) {
                        inst.dpDiv.css({ marginTop: '50px', marginLeft: '50px' });
                    },
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'DD, M dd, yy',
                    numberOfMonths: 1,
                    onSelect: function (selectedDate, inst) {
                        date = $(this).datepicker('getDate');
                        selectedWeekNumber = (!date ? 0 : $.datepicker.iso8601Week(date));

                        selectedMonthName = month_return($(this).datepicker("getDate").getMonth(), 1); 
                        selectedShortMonthName = month_return($(this).datepicker("getDate").getMonth(), 2);  
                        selectedDayName = dayName_return($(this).datepicker("getDate").getDay(), 1); 
                        selectedShortDayName = dayName_return($(this).datepicker("getDate").getDay(), 2);
                        dateNumber = $(this).datepicker("getDate").getDate();
                        yearNumber = $(this).datepicker("getDate").getFullYear();
                        createHeaderForWeekView(date, selectedMonthName, dateNumber, selectedShortDayName, yearNumber);                        
                        
                        DateRange = createDateRange(weekStart, weekEnd);
                        $(".active").after(function () {
                            if ((this.id) == "button_year") {
                                create_time_header(0, 0, 0, 1, 0);
                            }
                            else if ((this.id) == "button_month") {
                                create_time_header(0, 0, 1, 0, 0);

                            } else if ((this.id) == "button_week") {
                                create_time_header(0, 1, 0, 0, 0);

                            } else if ((this.id) == "button_day") {
                                create_time_header(1, 0, 0, 0, 0);

                            }

                        });
                        createMainCalendar();
                    }
                });

            $(".day_name").click(function () {
                $("#datepicker").focus();

            });


            //button actions 
            $("#button_year").click(function () {
                create_time_header(0, 0, 0, 1, 0);
            });

            $("#button_month").click(function () {
                create_time_header(0, 0, 1, 0, 0);
            });

            $("#button_week").click(function () {
                create_time_header(0, 1, 0, 0, 0);
            });

            $("#button_day").click(function () {
                create_time_header(1, 0, 0, 0, 0);
            });

            $("#button_today").click(function () {
                $("#tdDay").html(today_selectedDayName);
                $("#tdMonthName").html(today_selectedShortMonthName);
                $("#tdDateNumber").html(today_dateNumber);
                $(".active").removeClass("active");
                create_time_header(0, 0, 0, 0, 1);
            });

        });

        //table header 
        function createHeaderForWeekView(actualDate, MonthName, selectedNumberOfDay, selectedNameOfDayShort, SelectedYearNumber) {
            var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            var weekDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            var ShortWeekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            var dayLimit = "";
            var monthType = (jQuery.inArray(MonthName, months));
            var cnt = (jQuery.inArray(selectedNameOfDayShort, ShortWeekDays));
            var k = (cnt * -1);
            selectedNumberOfDay = selectedNumberOfDay + k + 1;
            weekStart = selectedNumberOfDay;
            
            for (var i = cnt; i < cnt + 7; ++i) {
 
                // mode makes day number zero, to avoid zero month number

                if (selectedNumberOfDay == 0) {
                    if (((monthType % 2) == 0)) {
                        //30days in month  
                        dayLimit = 30;
                        if (selectedNumberOfDay >= dayLimit) {
                            selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                        }
                    } else if (((monthType % 2) == 1) && (monthType != 1)) {
                        //31days in month                                              
                        dayLimit = 31;
                        if (selectedNumberOfDay >= dayLimit) {
                            selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                        }
                        //this if block is for month of feb
                    } else if (monthType == 1) {
                            ;
                        //calculating lap year for february (every 4years feb is 29 days)
                        if ((SelectedYearNumber % 4) == 0) {
                            dayLimit = 29;

                        } else {
                            dayLimit = 28;

                        }
                        //alert("feb is :" + dayLimit);
                        if (selectedNumberOfDay >= dayLimit) {
                            selectedNumberOfDay = (selectedNumberOfDay % dayLimit);

                        }

                    }
                    selectedNumberOfDay++;
                }

                //for beginning of the month
                if (selectedNumberOfDay < 0) {
                    if (((monthType % 2) == 0)) {
                        //30days in month  
                        dayLimit = 31;
                        if (selectedNumberOfDay >= dayLimit) {
                            selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                        }
                    } else if (((monthType % 2) == 1) && (monthType != 1)) {
                        //31days in month                                              
                        dayLimit = 30;
                        if (selectedNumberOfDay >= dayLimit) {
                            selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                        }
                        //this if block is for month of feb
                    } else if (monthType == 1) {
                            ;
                        //calculating lap year for february (every 4years feb is 29 days)
                        if ((SelectedYearNumber % 4) == 0) {
                            dayLimit = 29;

                        } else {
                            dayLimit = 28;

                        }
                        if (selectedNumberOfDay >= dayLimit) {
                            selectedNumberOfDay = (selectedNumberOfDay % dayLimit);

                        }

                    }
                    selectedNumberOfDay = dayLimit + selectedNumberOfDay;
                }

                $("#" + ShortWeekDays[((i) + (cnt * -1))] + "").html("<div style='text-decoration:underline; width:100%' id='" +ShortWeekDays[((i) + (cnt * -1))] +"'>" + ShortWeekDays[((i) + (cnt * -1) + 1) % 7] + "</div><div style=' width:50%'>" + selectedNumberOfDay + "</div>");

                if (((monthType % 2) == 0)) {
                    //30days in month  
                    dayLimit = 31;
                    if (selectedNumberOfDay >= dayLimit) {
                        selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                    }
                } else if (((monthType % 2) == 1) && (monthType != 1)) {
                    //31days in month                                              
                    dayLimit = 30;
                    if (selectedNumberOfDay >= dayLimit) {
                        selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                    }
                    //this if block is for month of feb
                } else if (monthType == 1) {
                        ;
                    //calculating lap year for february (every 4years feb is 29 days)
                    if ((SelectedYearNumber % 4) == 0) {
                        dayLimit = 29;

                    } else {
                        dayLimit = 28;

                    }
                    if (selectedNumberOfDay >= dayLimit) {
                        selectedNumberOfDay = (selectedNumberOfDay % dayLimit);
                    }
                }
                selectedNumberOfDay++;
                
            }
            weekEnd = selectedNumberOfDay - 1;
            weekStart = todayDate.getMonth() + "/" + weekStart + "/" + yearNumber;
            weekEnd = todayDate.getMonth() + "/" + weekEnd + "/" + yearNumber;
            DateRange = createDateRange(weekStart, weekEnd);
            
        }

        function create_time_header(day, week, month, year, today) {
            if (day == 1 && week == 0 && month == 0 && year == 0 && today == 0) { //day view
                $("#tdDay").html(selectedDayName);
                $("#tdMonthName").html(selectedShortMonthName);
                $("#tdDateNumber").html(dateNumber);

                $("#weekOnly").hide();
                $("#button_year").removeClass("active");
                $("#button_month").removeClass("active");
                $("#button_week").removeClass("active");
                $("#button_day").addClass("active");
                $("#button_today").removeClass("active");
                createMainCalendar();

            }

            if (day == 0 && week == 0 && month == 0 && year == 0 && today == 1) { //Today view
                $("#weekOnly").hide();
                $("#button_year").removeClass("active");
                $("#button_month").removeClass("active");
                $("#button_week").removeClass("active");
                $("#button_day").removeClass("active");
                $("#button_today").addClass("active");
                createMainCalendar();
            }
            else if (day == 0 && week == 1 && month == 0 && year == 0 && today == 0) { //week view  

                $("#tdDay").html("Week " + selectedWeekNumber);
                $("#tdMonthName").html(yearNumber);
                $("#tdDateNumber").html("&nbsp;");
                $("#weekOnly").show();

                $("#button_year").removeClass("active");
                $("#button_month").removeClass("active");
                $("#button_week").addClass("active");
                $("#button_day").removeClass("active");
                $("#button_today").removeClass("active");
                DateRange = createDateRange(weekStart, weekEnd);
                createMainCalendar();
               
            }
            else if (day == 0 && week == 0 && month == 1 && year == 0 && today == 0) {//month view
                $("#tdDay").html(selectedMonthName);
                $("#tdMonthName").html(yearNumber);
                $("#tdDateNumber").html("&nbsp;");

                $("#weekOnly").hide();
                $("#button_year").removeClass("active");
                $("#button_month").addClass("active");
                $("#button_week").removeClass("active");
                $("#button_day").removeClass("active");
                $("#button_today").removeClass("active");
                createMainCalendar();

            } else if (day == 0 && week == 0 && month == 0 && year == 1 && today == 0) {//year view
                $("#tdDay").html(yearNumber);
                $("#tdMonthName").html(selectedShortMonthName);
                $("#tdDateNumber").html("&nbsp;");

                $("#weekOnly").hide();
                $("#button_year").addClass("active");
                $("#button_month").removeClass("active");
                $("#button_week").removeClass("active");
                $("#button_day").removeClass("active");
                $("#button_today").removeClass("active");
                createMainCalendar();

            }

        }

        //Returne Week number of the year
        function getWeekNumber(d) {
            // Copy date so don't modify original
            d = new Date(d);
            d.setHours(0, 0, 0);
            // Set to nearest Thursday: current date + 4 - current day number
            // Make Sunday's day number 7
            d.setDate(d.getDate() + 4 - (d.getDay() || 7));
            // Get first day of year
            var yearStart = new Date(d.getFullYear(), 0, 1);
            // Calculate full weeks to nearest Thursday
            var weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7)
            return weekNo;
        }

        // returns long or short version of the month
        function month_return(monthind, monthtype) {
            var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            var shortmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var monthName = "";

            if (monthtype == 1) {
                monthName = months[monthind];
            } else {
                monthName = shortmonths[monthind];
            }

            return monthName;
        }
        //returns long or short version of weekdays
        function dayName_return(weekind, weektype) {
            var weekDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            var ShortWeekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            var weekDayName = "";

            if (weektype == 1) {
                weekDayName = weekDays[weekind];
            } else {
                weekDayName = ShortWeekDays[weekind];
            }

            return weekDayName;
        }



    </script>
</body>